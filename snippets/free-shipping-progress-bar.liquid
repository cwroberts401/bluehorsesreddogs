<!-- cart-total-progress-bar.liquid -->

<div class="cart-total-progress-bar">
  <div class="progress-bar-wrapper">
    <div class="progress-bar" id="progressBar"></div>
  </div>
  <p class="progress-text" id="progressText"></p>
</div>

<script>
  // Fetch cart data and update progress bar
  fetch('/{{ shop.locale }}/cart.js')
    .then(response => response.json())
    .then(data => {
      const cartTotal = data.total_price;
      const freeShippingThreshold = 50.00; // Set your free shipping threshold
      const progressPercentage = (cartTotal / freeShippingThreshold) * 100;
      
      // Update progress bar width
      const progressBar = document.getElementById('progressBar');
      progressBar.style.width = `${progressPercentage}%`;

      // Update progress text
      const progressText = document.getElementById('progressText');
      progressText.innerText = `You're ${progressPercentage}% there to free shipping!`;
    })
    .catch(error => {
      console.error('Error fetching cart data:', error);
    });
</script>

