<!-- cart-price-update.liquid -->

<div class="cart-price"></div>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    // Function to fetch and update cart price
    function updateCartPrice() {
      fetch('/cart.js')
        .then(response => response.json())
        .then(data => {
          const cartPrice = data.total_price;
          console.log(cartPrice)
          // Update the cart price wherever needed on the page
          document.querySelector('.cart-price').innerText = cartPrice;
        })
        .catch(error => {
          console.error('Error fetching cart data:', error);
        });
    }

    // Update cart price on page load
    updateCartPrice();

    // Add event listeners to buttons within cart-item_quantity class
    var quantityButtons = document.querySelectorAll('.cart-item__quantity button');
    quantityButtons.forEach(function(button) {
      button.addEventListener('click', function(event) {
        // Perform action when a quantity button is clicked
        console.log('Quantity button clicked');
        // You can add your custom logic here, such as updating cart price
        updateCartPrice(); // Example: Update cart price when quantity button is clicked
      });
    });

    // Add event listeners to all buttons with type="submit"
    var submitButtons = document.querySelectorAll('button[type="submit"]');
    submitButtons.forEach(function(button) {
      button.addEventListener('click', function(event) {
        // Perform action when a submit button is clicked
        console.log('Submit button clicked');
        // You can add your custom logic here, such as updating cart price
        updateCartPrice(); // Example: Update cart price when submit button is clicked
      });
    });
  });
</script>
